<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة الموظفين - الإعدادات</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- القائمة الجانبية -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>نظام إدارة الموظفين</h2>
        </div>
        <div class="sidebar-menu">
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i> الرئيسية</a></li>
                <li><a href="employees.html"><i class="fas fa-users"></i> الموظفين</a></li>
                <li><a href="departments.html"><i class="fas fa-building"></i> الأقسام</a></li>
                <li><a href="job-titles.html"><i class="fas fa-briefcase"></i> المسميات الوظيفية</a></li>
                <li><a href="vacations.html"><i class="fas fa-calendar-alt"></i> الإجازات</a></li>
                <li><a href="reports.html"><i class="fas fa-chart-bar"></i> التقارير</a></li>
                <li class="active"><a href="settings.html"><i class="fas fa-cog"></i> الإعدادات</a></li>
            </ul>
        </div>
    </div>

    <!-- المحتوى الرئيسي -->
    <div class="main-content">
        <!-- شريط العنوان -->
        <div class="header">
            <div class="header-left">
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h2>إعدادات النظام</h2>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span>مرحباً، المدير</span>
                    <a href="#" class="logout-btn"><i class="fas fa-sign-out-alt"></i> تسجيل الخروج</a>
                </div>
            </div>
        </div>

        <!-- محتوى الصفحة -->
        <div class="content">
            <div class="settings-container">
                <!-- تبويبات الإعدادات -->
                <div class="settings-tabs">
                    <button class="tab-btn active" data-tab="general">
                        <i class="fas fa-cog"></i> إعدادات عامة
                    </button>
                    <button class="tab-btn" data-tab="company">
                        <i class="fas fa-building"></i> بيانات الشركة
                    </button>
                    <button class="tab-btn" data-tab="users">
                        <i class="fas fa-users-cog"></i> إدارة المستخدمين
                    </button>
                    <button class="tab-btn" data-tab="backup">
                        <i class="fas fa-database"></i> النسخ الاحتياطي
                    </button>
                </div>

                <!-- محتوى التبويبات -->
                <div class="tab-content">
                    <!-- الإعدادات العامة -->
                    <div class="tab-pane active" id="general-tab">
                        <div class="form-container">
                            <div class="form-section">
                                <h3 class="section-title">الإعدادات العامة</h3>
                                <form id="general-settings-form">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="language">اللغة</label>
                                            <select id="language" name="language">
                                                <option value="ar" selected>العربية</option>
                                                <option value="en">الإنجليزية</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="date-format">تنسيق التاريخ</label>
                                            <select id="date-format" name="dateFormat">
                                                <option value="dd/mm/yyyy" selected>يوم/شهر/سنة</option>
                                                <option value="mm/dd/yyyy">شهر/يوم/سنة</option>
                                                <option value="yyyy/mm/dd">سنة/شهر/يوم</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="theme">المظهر</label>
                                            <select id="theme" name="theme">
                                                <option value="light" selected>فاتح</option>
                                                <option value="dark">داكن</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="items-per-page">عدد العناصر في الصفحة</label>
                                            <select id="items-per-page" name="itemsPerPage">
                                                <option value="10">10</option>
                                                <option value="20" selected>20</option>
                                                <option value="50">50</option>
                                                <option value="100">100</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" id="save-general-settings" class="btn btn-primary">
                                            <i class="fas fa-save"></i> حفظ الإعدادات
                                        </button>
                                        <button type="button" id="reset-general-settings" class="btn btn-secondary">
                                            <i class="fas fa-undo"></i> إعادة تعيين
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- بيانات الشركة -->
                    <div class="tab-pane" id="company-tab">
                        <div class="form-container">
                            <div class="form-section">
                                <h3 class="section-title">بيانات الشركة</h3>
                                <form id="company-settings-form">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="company-name">اسم الشركة <span class="required">*</span></label>
                                            <input type="text" id="company-name" name="companyName" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="company-email">البريد الإلكتروني</label>
                                            <input type="email" id="company-email" name="companyEmail">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="company-phone">رقم الهاتف</label>
                                            <input type="text" id="company-phone" name="companyPhone">
                                        </div>
                                        <div class="form-group">
                                            <label for="company-website">الموقع الإلكتروني</label>
                                            <input type="url" id="company-website" name="companyWebsite">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group full-width">
                                            <label for="company-address">العنوان</label>
                                            <textarea id="company-address" name="companyAddress" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="company-logo">شعار الشركة</label>
                                            <div class="file-upload">
                                                <input type="file" id="company-logo" name="companyLogo" accept="image/*">
                                                <button type="button" class="btn btn-secondary file-upload-btn">
                                                    <i class="fas fa-upload"></i> اختر ملفاً
                                                </button>
                                                <span class="file-name">لم يتم اختيار ملف</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>معاينة الشعار</label>
                                            <div class="logo-preview">
                                                <img id="logo-preview-img" src="#" alt="شعار الشركة" style="display: none;">
                                                <div class="no-logo" id="no-logo">
                                                    <i class="fas fa-image"></i>
                                                    <span>لا يوجد شعار</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" id="save-company-settings" class="btn btn-primary">
                                            <i class="fas fa-save"></i> حفظ البيانات
                                        </button>
                                        <button type="button" id="reset-company-settings" class="btn btn-secondary">
                                            <i class="fas fa-undo"></i> إعادة تعيين
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- إدارة المستخدمين -->
                    <div class="tab-pane" id="users-tab">
                        <div class="data-container">
                            <div class="section-header">
                                <h3><i class="fas fa-users-cog"></i> إدارة المستخدمين</h3>
                                <button id="add-user-btn" class="btn btn-success">
                                    <i class="fas fa-user-plus"></i> إضافة مستخدم جديد
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="data-table" id="users-table">
                                    <thead>
                                        <tr>
                                            <th>الرقم</th>
                                            <th>اسم المستخدم</th>
                                            <th>الاسم الكامل</th>
                                            <th>الصلاحية</th>
                                            <th>الحالة</th>
                                            <th>آخر تسجيل دخول</th>
                                            <th>الإجراءات</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- سيتم ملء هذا الجدول بواسطة JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- النسخ الاحتياطي -->
                    <div class="tab-pane" id="backup-tab">
                        <div class="form-container">
                            <div class="form-section">
                                <h3 class="section-title">النسخ الاحتياطي واستعادة البيانات</h3>
                                <div class="backup-options">
                                    <div class="backup-card">
                                        <div class="backup-icon">
                                            <i class="fas fa-download"></i>
                                        </div>
                                        <div class="backup-info">
                                            <h4>تصدير البيانات</h4>
                                            <p>تصدير جميع بيانات النظام إلى ملف JSON</p>
                                        </div>
                                        <button id="export-data-btn" class="btn btn-primary">
                                            <i class="fas fa-download"></i> تصدير البيانات
                                        </button>
                                    </div>
                                    <div class="backup-card">
                                        <div class="backup-icon">
                                            <i class="fas fa-upload"></i>
                                        </div>
                                        <div class="backup-info">
                                            <h4>استيراد البيانات</h4>
                                            <p>استيراد البيانات من ملف JSON</p>
                                        </div>
                                        <div class="file-upload">
                                            <input type="file" id="import-data-file" accept=".json">
                                            <button type="button" id="import-data-btn" class="btn btn-warning">
                                                <i class="fas fa-upload"></i> استيراد البيانات
                                            </button>
                                        </div>
                                    </div>
                                    <div class="backup-card">
                                        <div class="backup-icon danger">
                                            <i class="fas fa-trash-alt"></i>
                                        </div>
                                        <div class="backup-info">
                                            <h4>إعادة تعيين البيانات</h4>
                                            <p>حذف جميع البيانات وإعادة تعيين النظام</p>
                                        </div>
                                        <button id="reset-data-btn" class="btn btn-danger">
                                            <i class="fas fa-trash-alt"></i> إعادة تعيين
                                        </button>
                                    </div>
                                </div>
                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <div>
                                        <strong>تحذير:</strong> استيراد البيانات سيؤدي إلى استبدال جميع البيانات الحالية. يرجى التأكد من عمل نسخة احتياطية قبل الاستيراد.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- تذييل الصفحة -->
        <div class="footer">
            <p>جميع الحقوق محفوظة &copy; 2025 - نظام إدارة الموظفين</p>
        </div>
    </div>

    <!-- نموذج إضافة مستخدم جديد -->
    <div class="modal" id="add-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>إضافة مستخدم جديد</h3>
                <button class="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="add-user-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="username">اسم المستخدم <span class="required">*</span></label>
                            <input type="text" id="username" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="password">كلمة المرور <span class="required">*</span></label>
                            <input type="password" id="password" name="password" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="employee-id">الموظف المرتبط</label>
                            <select id="employee-id" name="employeeID">
                                <option value="">اختر موظفاً...</option>
                                <!-- سيتم ملء هذه القائمة بواسطة JavaScript -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="user-role">الصلاحية <span class="required">*</span></label>
                            <select id="user-role" name="userRole" required>
                                <option value="admin">مدير</option>
                                <option value="manager">مشرف</option>
                                <option value="user">مستخدم</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="user-status">الحالة</label>
                            <select id="user-status" name="isActive">
                                <option value="true" selected>نشط</option>
                                <option value="false">غير نشط</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="save-user-btn" class="btn btn-success">
                    <i class="fas fa-save"></i> حفظ
                </button>
                <button class="btn btn-secondary modal-close-btn">
                    <i class="fas fa-times"></i> إلغاء
                </button>
            </div>
        </div>
    </div>

    <!-- نموذج تعديل مستخدم -->
    <div class="modal" id="edit-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>تعديل بيانات المستخدم</h3>
                <button class="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="edit-user-form">
                    <input type="hidden" id="edit-user-id">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-username">اسم المستخدم <span class="required">*</span></label>
                            <input type="text" id="edit-username" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-password">كلمة المرور (اتركها فارغة للاحتفاظ بالحالية)</label>
                            <input type="password" id="edit-password" name="password">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-employee-id">الموظف المرتبط</label>
                            <select id="edit-employee-id" name="employeeID">
                                <option value="">اختر موظفاً...</option>
                                <!-- سيتم ملء هذه القائمة بواسطة JavaScript -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-user-role">الصلاحية <span class="required">*</span></label>
                            <select id="edit-user-role" name="userRole" required>
                                <option value="admin">مدير</option>
                                <option value="manager">مشرف</option>
                                <option value="user">مستخدم</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-user-status">الحالة</label>
                            <select id="edit-user-status" name="isActive">
                                <option value="true">نشط</option>
                                <option value="false">غير نشط</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="update-user-btn" class="btn btn-success">
                    <i class="fas fa-save"></i> حفظ التغييرات
                </button>
                <button class="btn btn-secondary modal-close-btn">
                    <i class="fas fa-times"></i> إلغاء
                </button>
            </div>
        </div>
    </div>

    <!-- نموذج تأكيد حذف المستخدم -->
    <div class="modal" id="delete-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>تأكيد الحذف</h3>
                <button class="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p>هل أنت متأكد من رغبتك في حذف المستخدم "<span id="delete-username"></span>"؟</p>
                <p class="warning">ملاحظة: سيتم حذف المستخدم نهائياً من قاعدة البيانات.</p>
                <input type="hidden" id="delete-user-id">
            </div>
            <div class="modal-footer">
                <button id="confirm-delete-user-btn" class="btn btn-danger">
                    <i class="fas fa-trash"></i> تأكيد الحذف
                </button>
                <button class="btn btn-secondary modal-close-btn">
                    <i class="fas fa-times"></i> إلغاء
                </button>
            </div>
        </div>
    </div>

    <!-- نموذج تأكيد إعادة تعيين البيانات -->
    <div class="modal" id="confirm-reset-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>تأكيد إعادة التعيين</h3>
                <button class="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p class="warning">تحذير: سيؤدي هذا الإجراء إلى حذف جميع البيانات وإعادة تعيين النظام بالكامل.</p>
                <p>هذا الإجراء لا يمكن التراجع عنه. هل أنت متأكد من رغبتك في المتابعة؟</p>
                <div class="form-group">
                    <label for="confirm-reset-text">اكتب "تأكيد" للمتابعة:</label>
                    <input type="text" id="confirm-reset-text" placeholder="تأكيد">
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirm-reset-btn" class="btn btn-danger" disabled>
                    <i class="fas fa-exclamation-triangle"></i> تأكيد إعادة التعيين
                </button>
                <button class="btn btn-secondary modal-close-btn">
                    <i class="fas fa-times"></i> إلغاء
                </button>
            </div>
        </div>
    </div>

    <!-- سكريبت قاعدة البيانات -->
    <script src="js/database.js"></script>
    <!-- سكريبت الإعدادات -->
    <script src="js/settings.js"></script>
</body>
</html>
